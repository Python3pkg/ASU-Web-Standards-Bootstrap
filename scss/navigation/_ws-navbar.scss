// Web Standards Navbar
// 
// Just like in Bootstrap, but styled differently, uses `navbar`
// 
// Markup:
// <nav class="navbar navbar-ws affix-top" role="navigation">
//     <div class="container-fluid">
//         <div class="navbar-header">
//             <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#ws-navbar-collapse-1" style="display: inline-block;">
//                 <span class="sr-only">Toggle navigation</span>
//                 <span class="icon-bar"></span>
//                 <span class="icon-bar"></span>
//                 <span class="icon-bar"></span>
//             </button>
//             <a class="navbar-brand" href="#">Global Sustainability</a>
//         </div>
//         <div id="ws-navbar-collapse-1" class="collapse navbar-collapse">
//             <ul id="menu-header-menu" class="nav navbar-nav">
//                 <li><a href="#" id="home-icon-main-nav"><span class="fa fa-home hidden-xs hidden-sm" aria-hidden="true"></span><span class="hidden-md hidden-lg">Home</span></a>
//                 </li>
//                 <li class="menu-item"><a title="Outreach" href="#" id="nav-item_outreach">Outreach</a>
//                 </li>
//                 <li class="menu-item"><a title="Research" href="#" id="nav-item_research">Research</a>
//                 </li>
//                 <li class="menu-item"><a title="Solutions" href="#" id="nav-item_solutions">Solutions</a>
//                 </li>
//                 <li class="menu-item"><a title="Operations" href="#" id="nav-item_operations">Operations</a>
//                 </li>
//             </ul>
//         </div>
//     </div>
//     <!-- /.navbar-collapse -->
// </nav>
//
// Styleguide navigation.web-standards

// Navbar States
// 
// There are 4 main states that need to be consistent within the navbar:
// 
// Markup:
// <nav class="navbar navbar-ws affix-top" role="navigation">
//     <div class="container-fluid">
//         <div class="collapse navbar-collapse">
//             <ul class="nav navbar-nav">
//                 <li><a href="#">Normal</a>
//                 </li>
//                 <li class="active"><a href="#">Active</a>
//                 </li>
//                 <li class="hover"><a href="#">Hover</a>
//                 </li>
//                 <li class="disabled"><a href="#">Disabled</a>
//                 </li>
//             </ul>
//         </div>
//     </div>
// </nav>
//
// Styleguide navigation.web-standards.states
.navbar-ws {
  background-color: $color-mine-shaft;
  border: 0;
  border-radius: 0;
  position: relative;
  z-index: 10000;

  @media (max-width: $asu-screen-sm-max) {
    background-color: rgb(80, 85, 88);

    &.affix {
      position: static !important;
    }
  }

  .container {
    padding-left: 0;
    padding-right: 0;

    @media (max-width: $asu-screen-sm-max) {
      width: 100%;
    }
  }

  .navbar-collapse {
    @media(max-width: $asu-screen-sm-max) {
      position: absolute;
      width: 100%;
      z-index: 10000;
    }
  }

  &.affix {
    position: fixed;
    top: 0;
    width: 100%;
    // admin bars usually have a z-index of 999999 and we want them to overlay on top of this affixed top menu
    z-index: 999998;

    @media(max-width: $asu-screen-sm-max) {
      position: absolute !important;
    }
  }

  .navbar-nav {
    > {
      li:first-child > a {
        &:first-child {
          @media (min-width: $asu-screen-md-min) {
            height: 57px;
            padding: 20.5px 25px !important;
          }
        }
      }

      li > a {
        // TODO refactor these constants
        background-color: transparent;
        color:            $color-gallery;
        font-size:        $ws-nav-link__font-size;
        font-weight:      bold;
        line-height:      $ws-nav-link__line-height;
        padding:          21px 16px;

        @media (max-width: $asu-screen-lg-min) {
          padding-left:  14px;
          padding-right: 14px;
        }

        // TODO carots should be $color-dove-gray (#666)

        &:hover,
        &:focus {
          background-color: $color-black;
          color: $color-sun;

          // TODO carots should be #eee
          
          @media(max-width: $asu-screen-sm-max) {
            background-color: rgb(220, 220, 220);
            color: inherit;
          }
        }
      }

      li.hover > a {
        background-color: $color-black;
        color: $color-sun;

        // TODO carots should be #eee
        
        @media(max-width: $asu-screen-sm-max) {
          background-color: rgb(220, 220, 220);
          color: inherit;
        }
      }

      li.open > a {
        background-color: $color-black;
        color: $color-sun;

        @media(max-width: $asu-screen-sm-max) {
          background-color: rgb(240, 240, 240);
          color: inherit;
        }
      }

      .active > a {
        background-color: $color-dark-cave;
        // TODO the docs say this should be $color-selective-yellow, but
        // everyone is using white
        color: $color-white;

        @media(max-width: $asu-screen-sm-max) {
          background-color: rgb(240, 240, 240);
          color: inherit;
        }
      }

      .disabled > a {
        &,
        &:hover,
        &:focus {
          background-color: transparent;
          color: $color-silver;
        }
      }

      > .open > a {
        &,
        &:hover,
        &:focus {
          background-color: $color-dark-cave;
          color: $color-sun;

          @media(max-width: $asu-screen-sm-max) {
            background-color: rgb(220, 220, 220);
            color: inherit;
          }
        }
      }

      @media(max-width: $asu-screen-sm-max) {
        li {
          background-color: white;
          border-bottom: 1px solid rgb(221, 221, 221);

          > a {
            color:       rgb(80, 85, 88);
            font-size:   $ws-nav-link__font-size;
            font-weight: 600;
            padding:     12px 15px;
            position:    relative;

            .caret {
              background-color: rgb(244, 244, 244);
              border-bottom: 0;
              border-left: 1px solid rgb(221, 221, 221);
              border-right: 0;
              border-top: 0;
              box-sizing: content-box;
              color: rgb(178, 178, 178);
              cursor: pointer;
              display: block;
              font-family: FontAwesome;
              font-size: pem(20);
              font-style: normal;
              font-variant: normal;
              font-weight: normal;
              height: 13px;
              line-height: 20px;
              padding: 11px 10px 15px;
              position: absolute;
              right: 0;
              speak: none;
              text-align: center;
              text-transform: none;
              top: 0;
              width: 35px;  

              &:before {
                content: '\f0d7';
              }
            }
          }
        }
      }
    }
  }

  .navbar-brand {
    color: $color-gallery;
    font-size: $font-size-xlarge;
    height: auto;
    line-height: 1;
    overflow: hidden;
    padding-right: 0;
    width: calc(100% - 60px);

    &:hover,
    &:focus {
      color: $color-gallery;
    }

    .navbar-text {
      color: $color-boulder;
    }

    @media(max-width: $asu-screen-sm-max) {
      font-size:   $ws-navbar-brand__font-size--small;
      font-weight: 600;
    }
  }

  .navbar-toggle {
    border: 0;

    @media (min-width: $asu-screen-sm-min) {
      display: block;
    }

    @media (min-width: $asu-screen-md-min) {
      display: none;
    }

    &:hover,
    &:focus {
      background-color: $color-black;

      .icon-bar {
        background-color: $color-sun;
      }
    }

    .icon-bar {
      background-color: $color-gallery;
    }
  }

  .navbar-collapse,
  .navbar-form {
    border-color: $color-black;
  }

  .navbar-link {
    color: $color-boulder;

    // TODO why does this color get darker?
    &:hover {
      color: $color-mine-shaft;
    }
  }

  .btn-link {
    color: $color-boulder;

    // TODO why does this color get darker?
    &:hover,
    &:focus {
      color: $color-mine-shaft;
    }

    &[disabled]:hover,
    &[disabled]:focus,
    fieldset[disabled] &:hover,
    fieldset[disabled] &:focus {
      color: $color-silver;
    }
  }

  .dropdown-menu {
    background-color: darken($color-mine-shaft, 8);
    border: $space-xsmall solid $color-black;
    border-color: transparent;
    border-radius: $border-radius;
    -webkit-box-shadow: none;
    box-shadow: none;
    display: block;
    margin: 0;
    max-height: 0;
    min-width: $nav-bar-dropdown-width;
    overflow: hidden;
    padding: 0;
    position: relative;
    width: 100%;
    

    @media (min-width: $asu-screen-sm-max) {
      position: absolute;
      width: auto;
    }

    .divider {
      background-color: $color-black;
      height: $space-xsmall;
      margin: $space-base 0;
      overflow: hidden;
    }

    > li {
      @media(max-width: $asu-screen-sm-max) {
        background-color: rgb(244, 244, 244);
        border-top: 1px solid rgb(221, 221, 221);
      }

      > a {
        color: $color-gallery;
        font-size: $ws-menu__font-size;
        font-weight: normal;
        line-height: $line-height-menu;
        padding: $space-large $space-xxlarge;

        @media(max-width: $asu-screen-sm-max) {
          color: rgb(164, 43, 77);
          font-size: $ws-menu__font-size--small;
          font-weight: 200;
        }

        &:hover,
        &:focus {
          background-color: $color-black;
          border: 0;
          color: $color-gallery;
          text-decoration: none;

          @media(max-width: $asu-screen-sm-max) {
            background-color: inherit;
            color: rgb(210, 48, 101);
          }
        }
      }
    }

    > .active > a {
      &,
      &:hover,
      &:focus {
        background-color: $color-black;
        color: $color-gallery;
        outline: 0;
        text-decoration: none;
      }
    }
  }

  .open.dropdown {
    @media (max-width: $asu-screen-sm-max) {
      .caret {
        &:before {
          content: '\f0d8';
        }
      }
    }
  }

  .open > .dropdown-menu {
    @include box-shadow(0 $space-base $space-large rgba(0, 0, 0, .2));

    border-color: $color-black;
    max-height: $nav-bar-dropdown-max-height;
    padding: $space-large 0;

    @media (max-width: $asu-screen-sm-max) {
      @include box-shadow(none);

      padding: 0;
    }
  }
}

.blackout {
  background-color: rgba(0, 0, 0, .7);
  bottom: 0;
  display: block;
  left: 0;
  position: fixed;
  right: 0;
  top: 0;
  z-index: 9999;
}
